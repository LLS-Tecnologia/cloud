#!/bin/sh
# Biblioteca para Shell Script
#
# Autor: Leandro Luiz
# email: lls.homeoffice@gmail.com

USER="lls"
PASSWORD="Lls#739200"
DIR_USER="/home/${USER}"
DIR_TOMCAT="/usr/share/tomcat"
DIR_TOMCAT_CONF="${DIR_TOMCAT}/conf"

ARQ_TOMCAT_USERS="${DIR_TOMCAT_CONF}/tomcat-users.xml"
ARQ_TOMCAT_SERVER="${DIR_TOMCAT_CONF}/server.xml"
ARQ_CATALINA_OPTS="${DIR_TOMCAT_CONF}/conf.d/catalina_opts.conf"
ARQ_TOMCAT_SERVICE="/etc/systemd/system/tomcat.service"

VERSAO="7"
RELEASE="${VERSAO}.0.105"
ARQ_TOMCAT="apache-tomcat-${RELEASE}.tar.gz"

DIR_MYSQL="/var/lib/mysql"

PROJETO="lls"
DIR_APP="${DIR_TOMCAT}/webapps/${PROJETO}"

DIR_HTTP="/var/www/html"
DIR_SSL_VALIDATION="${DIR_HTTP}/.well-known/pki-validation"

ALIAS="${USER}Key"
DNAME="lls.net.br"

HOSTNAME="`hostname`"

if [ "${HOSTNAME}" != "lls" ]; then

	DNAME="${HOSTNAME}.${DNAME}"

fi

DOMAIN=$(echo "${DNAME}" | sed s/www[.]//g | sed s/[.]/_/g)
DIR_KEYSTORE="${DIR_APP}/keystore"
KEYSTORE="${DIR_KEYSTORE}/${DOMAIN}.pfx"

DIR_CURRENT="${DIR_USER}/.dist/current"
ARQ_ZIP="${DIR_CURRENT}/${DNAME}.zip"
DIR_SSLFORFREE="${DIR_KEYSTORE}/sslforfree"
PRIVATE_KEY="${DIR_SSLFORFREE}/private.key"
CERTIFICATE="${DIR_SSLFORFREE}/certificate.crt"
CA_BUNDLE="${DIR_SSLFORFREE}/ca_bundle.crt"

if [ ! -d "${DIR_CURRENT}" ]; then

	mkdir -pv ${DIR_CURRENT}

fi

if [ `id -u` -ne 0 ]; then
	
	echo "Rodar script como root"
	exit 1
  
fi
